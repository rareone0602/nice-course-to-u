(function(e){function t(t){for(var o,a,i=t[0],u=t[1],c=t[2],d=0,p=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);l&&l(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],o=!0,i=1;i<s.length;i++){var u=s[i];0!==n[u]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=s[0]))}return e}var o={},n={app:0},r=[];function a(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=o,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(s,o,function(t){return e[t]}.bind(null,o));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/nice-course-to-u/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var o=s("85ec"),n=s.n(o);n.a},"0fb6":function(e,t,s){"use strict";var o=s("a98c"),n=s.n(o);n.a},"14d4":function(e,t,s){"use strict";var o=s("7e0e"),n=s.n(o);n.a},"1f5b":function(e,t,s){"use strict";var o=s("908f"),n=s.n(o);n.a},"2dc4":function(e,t,s){},3941:function(e,t,s){"use strict";var o=s("5141"),n=s.n(o);n.a},"3aa1":function(e,t,s){"use strict";var o=s("e6ea"),n=s.n(o);n.a},4678:function(e,t,s){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=r(e);return s(t)}function r(e){if(!s.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=r,e.exports=n,n.id="4678"},"4dff":function(e,t,s){"use strict";var o=s("5883"),n=s.n(o);n.a},5141:function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var o=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("course-tutor-main")},r=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-alert",{staticClass:"hidden-md-and-up",attrs:{effect:"dark",title:"目前使用手機相容模式，建議在平板或電腦上使用以獲得最佳挑課體驗",type:"warning"}}),s("a-modal",{attrs:{title:"如果您喜歡NiceCoruseToU，請前往粉絲團按讚支持吧!",visible:e.showAlert,"ok-text":"好的，我就按","cancel-text":"我不要，交大是陽明的一部分。"},on:{ok:function(t){return e.goToPage(!0)},cancel:function(t){return e.goToPage(!1)}}},[s("p",[e._v("NiceCourseToU的任務不只是為您選課，也更是延續過去的NCTU+，這段轉換期間會是非常漫長的過程。處在交大併校的轉換期，正是交大師生們需要一起凝聚起來的重要時刻。")]),s("p",[e._v("您簡單的一個讚，能使更多人發現NiceCourseToU的存在，並讓所有人團結，再造一個新的社群。未來NiceCourseToU不會只有選課的功能，也將是所有交大人的集散地之一。")]),s("p",[e._v("而為了答謝您的支持，我們未來會提供給您早期拓荒者的特殊功能喔！")])]),s("top-nav-bar"),s("dashboard",{staticClass:"hidden-md-and-up",attrs:{md:24,sm:24,xs:24}}),s("a-layout",[e.activeTab.includes("courseTable")?s("a-layout",[s("a-layout-sider",{staticClass:"hidden-sm-and-down",attrs:{width:"33%"}},[s("a-layout",[s("a-layout-content",[s("course-classified-list")],1),s("a-layout-footer",[s("dashboard")],1)],1)],1),s("a-layout-content",{attrs:{xs:24,sm:24,md:15,lg:15,xl:15}},[s("course-timetable-rollback")],1)],1):e._e()],1),s("a-row",[s("a-col",{staticClass:"hidden-md-and-up",attrs:{md:24,sm:24,xs:24}},[s("course-classified-list")],1)],1)],1)},i=[],u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticStyle:{width:"100%"},attrs:{"body-style":{padding:"0px"}}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.coursesForTable,"cell-style":{padding:"0","min-height":"1px"},size:"mini"},on:{"cell-mouse-enter":e.hoverOnTimetableGrid}},[s("el-table-column",{attrs:{type:"index",index:function(t){return e.courseOption.timeslot[t]},width:"20"}}),e._l(e.courseOption.weekday,(function(t){return s("el-table-column",{key:t,attrs:{label:e.nToWeekday[t],prop:t},scopedSlots:e._u([{key:"default",fn:function(e){return[s("course-grid",{attrs:{d:t,scope:e}})]}}],null,!0)})}))],2)],1)},c=[],l=(s("caad"),s("c975"),s("fb6a"),s("2532"),s("b85c")),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"course-grid",staticStyle:{"min-height":"50px"},attrs:{"body-style":{padding:"5px"}}},[e._l(e.coursesInGrid,(function(t){return s("course-tag",{key:t.cname+e.d+t.isPreview,attrs:{course:t,"course-size":e.courseSize,"background-color":e.backgroundColor}})})),e.showCourseInput?s("course-query",{directives:[{name:"show",rawName:"v-show",value:e.isEditable,expression:"isEditable"}],ref:"saveTagInput",staticClass:"hidden-md-and-down",attrs:{"course-size":e.courseSize,position:e.position,"show-course-input":e.showCourseInput},on:{"update:showCourseInput":function(t){e.showCourseInput=t},"update:show-course-input":function(t){e.showCourseInput=t}}}):s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEditable,expression:"isEditable"}],staticClass:"hidden-md-and-down button-new-tag",attrs:{size:"mini","body-style":{padding:"5px"}},on:{click:e.showQueryInput}},[e._v("+ ")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.coursesInGrid.length,expression:"coursesInGrid.length === 0"}],staticClass:"hidden-lg-and-up",attrs:{size:"mini"},on:{click:e.promptCourses}},[e._v(" +")]),s("el-dialog",{attrs:{title:"搜尋課程",visible:e.showPromptCourseInput},on:{"update:visible":function(t){e.showPromptCourseInput=t}}},[e._v(" 包含"+e._s(e.d+this.$store.state.timetableOptions.timeslot[this.scope.$index])+"的課程 "),s("course-query",{attrs:{"course-size":e.courseSize,position:e.position,"show-course-input":e.showCourseInput,"show-prompt-course-input":e.showPromptCourseInput},on:{"update:showCourseInput":function(t){e.showCourseInput=t},"update:show-course-input":function(t){e.showCourseInput=t},"update:showPromptCourseInput":function(t){e.showPromptCourseInput=t},"update:show-prompt-course-input":function(t){e.showPromptCourseInput=t}}}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.showPromptCourseInput=!1}}},[e._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showPromptCourseInput=!1}}},[e._v("新增")])],1)],1)],2)},p=[],f=(s("4de4"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-tag",{staticClass:"course-tag",style:{opacity:e.course.isPreview?.4:1},attrs:{closable:"",effect:"dark",type:e.backgroundColor(e.course),color:e.usingColor(e.course),size:e.courseSize,"disable-transitions":!0},on:{close:function(t){return e.updateCourse(e.course)}}},[s("el-icon",{staticClass:"el-icon-info",nativeOn:{click:function(t){return e.showCourseDetail(e.course)}}}),s("span",{staticClass:"hidden-lg-and-down"},[e._v(e._s(e.coursePreventOverflow(15)))]),s("span",{staticClass:"hidden-md-and-down hidden-xl-only"},[e._v(e._s(e.coursePreventOverflow(12)))]),s("span",{staticClass:"hidden-sm-and-down hidden-lg-and-up"},[e._v(e._s(e.coursePreventOverflow(6)))]),s("span",{staticClass:"hidden-xs-only hidden-md-and-up"},[e._v(e._s(e.coursePreventOverflow(8)))]),s("span",{staticClass:"hidden-sm-and-up"},[e._v(e._s(e.coursePreventOverflow(4)))])],1)}),h=[],m=(s("e05f"),{name:"course-tag",props:["course","courseSize","coursesInGrid","backgroundColor"],methods:{coursePreventOverflow:function(e){var t=parseInt(e),s=this.course.cname.substr(0,t);return this.course.cname.length>t&&(s+="."),s},usingColor:function(){return""}}}),v=m,w=(s("695c"),s("2877")),b=Object(w["a"])(v,f,h,!1,null,null,null),g=b.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-autocomplete",{ref:"courseQuery",staticClass:"input-new-tag",attrs:{"value-key":"cname",size:"mini","fetch-suggestions":e.queryCourses},on:{select:e.onCourseSelected},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.item;return[s("el-popover",{attrs:{placement:"left-start",trigger:"hover"},nativeOn:{mouseover:function(t){e.$store.state.timetableOptions.previewCourse=o}}},[s("span",{attrs:{slot:"reference",effect:"dark",size:e.courseSize,"disable-transitions":!0},slot:"reference"},[e._v(e._s(o.cname)+e._s(o.rawTimeslot)+" ")]),s("div",{staticClass:"addr"},[e._v(e._s(o.dep_cname))]),s("div",{staticClass:"addr"},[e._v(e._s(o.teacher))]),s("div",{staticClass:"addr"},[e._v(e._s(o.type))]),s("div",{staticClass:"addr"},[e._v(e._s(o.credit)+" 學分")]),s("div",{staticClass:"addr"},[e._v(e._s(o.rawTimeslot))]),s("div",{staticClass:"addr"},[e._v(e._s(o.reg_num)+" /"+e._s(o.num_limit))])])]}}]),model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})},y=[],_=(s("07ac"),{name:"CourseQuery",props:{courseSize:{},position:{},showCourseInput:{},showPromptCourseInput:{}},data:function(){return{inputValue:""}},methods:{queryCourses:function(e,t){var s=this,o=this.position,n=this.courseOption,r=this.allCourses,a=this.coursesGroup.slotsFilled,i=Object.values(r);i=i.filter((function(e){return void 0!==e})),i=i.filter((function(e){return e.timeSchedules})),i=i.filter((function(e){return e.timeSchedules.includes(o)})),i=i.filter((function(t){return t.cname.includes(e)})),i=i.filter((function(e){return!s.coursesGroup.list.includes(e)})),n.allowCrash||(i=i.filter((function(e){var t,s=e.timeSchedules,o=Object(l["a"])(s);try{for(o.s();!(t=o.n()).done;){var n=t.value;if(a[n])return!1}}catch(r){o.e(r)}finally{o.f()}return!0}))),t(i)},onCourseSelected:function(e){var t=this;this.updateCourse(e),this.$store.state.timetableOptions.previewCourse=null,this.$nextTick((function(){t.$emit("update:showCourseInput",!1),t.showPromptCourseInput&&t.$emit("update:showPromptCourseInput",!1),t.inputValue="",t.courseView.addingCourseGrid=null}))}}}),j=_,k=(s("4dff"),Object(w["a"])(j,C,y,!1,null,null,null)),x=k.exports,O={name:"course-grid",components:{CourseQuery:x,CourseTag:g},props:{d:{},scope:{}},data:function(){return{showCourseInput:!1,inputValue:"",showPromptCourseInput:!1}},computed:{coursesInGrid:function(){return this.scope.row[this.d].filter((function(e){return null!==e}))},courseSize:function(){return this.courseOption.allowCrash?"mini":"large"},position:function(){return this.d+this.courseOption.timeslot[this.scope.$index]},isEditable:function(){var e=!this.courseView.addingCourseGrid,t=this.courseView.addingCourseGrid===this.position,s=0===this.coursesInGrid.length;return(e||t)&&(this.courseOption.allowCrash||s)}},methods:{promptCourses:function(){this.showPromptCourseInput=!0},showQueryInput:function(){var e=this;this.courseView.addingCourseGrid=this.position,this.showCourseInput=!0,this.$nextTick((function(){e.$refs.saveTagInput.$refs.courseQuery.$refs.input.focus()}))},onPromptCourseSelected:function(e){var t=this;this.updateCourse(e),this.$store.state.timetableOptions.previewCourse=null,this.$nextTick((function(){t.showCourseInput=!1,t.inputValue="",t.showPromptCourseInput=!1}))},backgroundColor:function(e){return e?{"必修":"warning","選修":"","通識":"danger"}[e.type]:""}}},S=O,I=(s("5ab0"),Object(w["a"])(S,d,p,!1,null,null,null)),$=I.exports,T={name:"course-timetable",components:{CourseGrid:$},data:function(){return{nToWeekday:{1:"MON",2:"TUE",3:"WED",4:"THR",5:"FRI",6:"SAT",7:"SUN"}}},computed:{coursesForTable:function(){var e,t=this.$store.state.courseGroups[this.$store.state.usingCourse].scheduleSlots,s=this.courseOption.weekday,o=this.courseOption.timeslot,n=[],r=Object(l["a"])(o);try{for(r.s();!(e=r.n()).done;){var a,i=e.value,u={},c=Object(l["a"])(s);try{for(c.s();!(a=c.n()).done;){var d=a.value;u[d]=t[d+i].slice()}}catch(g){c.e(g)}finally{c.f()}n.push(u)}}catch(g){r.e(g)}finally{r.f()}var p=this.courseOption.previewCourse;if(p&&!this.coursesGroup.list.includes(p)){p=Object.assign({},p),p.isPreview=!0;var f,h=Object(l["a"])(p.timeSchedules);try{for(h.s();!(f=h.n()).done;){var m=f.value,v=m[0],w=this.courseOption.timeslot.indexOf(m[1]),b=n[w];b&&b[v].push(p)}}catch(g){h.e(g)}finally{h.f()}}return n}},methods:{hoverOnTimetableGrid:function(){}}},N=T,G=Object(w["a"])(N,u,c,!1,null,null,null),z=G.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-row",{attrs:{type:"flex",justify:"space-around"}},[s("a-col",{staticClass:"progress-container",attrs:{flex:1}},[s("a-progress",{staticClass:"progress",attrs:{gapPosition:"top",width:90,"stroke-width":10,type:"dashboard","stroke-color":e.progressColor,percent:Math.min(e.coursesCount/15*100,100),"show-text":!1},scopedSlots:e._u([{key:"format",fn:function(t){return[s("h4",[e._v(e._s(e.coursesCount)+" "+e._s(e.smaller(e.coursesCount,14)?"門":"畢業門"))])]}}])})],1),s("a-col",{staticClass:"progress-container",attrs:{flex:2}},[s("a-progress",{staticClass:"progress",attrs:{gapPosition:"top",width:150,"stroke-width":20,type:"dashboard","stroke-color":e.progressColor,percent:Math.min(e.credits/40*100,100),"show-text":!1},scopedSlots:e._u([{key:"format",fn:function(t){return[s("h3",[e._v(e._s(e.credits)+" "+e._s(e.smaller(e.credits,30)?"學分":"學分費"))])]}}])})],1),s("a-col",{staticClass:"progress-container",attrs:{flex:1}},[s("a-progress",{staticClass:"progress",attrs:{gapPosition:"top",width:90,"stroke-width":10,type:"dashboard","stroke-color":e.progressColor,percent:Math.min(e.hours/50*100,100),"show-text":!1},scopedSlots:e._u([{key:"format",fn:function(t){return[s("h4",[e._v(e._s(e.hours)+" "+e._s(e.smaller(e.hours,40)?"時數":"肝指數"))])]}}])})],1)],1)},D=[],P=(s("13d5"),{name:"dashboard",data:function(){return{progressColor:{"0%":"#87d068","100%":"#202020"}}},methods:{smaller:function(e,t){return e<t}},computed:{credits:function(){var e=this.coursesGroup.list.reduce((function(e,t){return e+(parseInt(t.credit)||0)}),0);return e},coursesCount:function(){return this.coursesGroup.list.length},hours:function(){var e=this.coursesGroup.list.reduce((function(e,t){return e+(parseInt(t.hours)||0)}),0);return e}}}),A=P,L=(s("d5fb"),Object(w["a"])(A,E,D,!1,null,null,null)),R=L.exports,U=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-page-header",[s("a-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[s("a-col",{staticStyle:{display:"flex","justify-content":"center"},attrs:{span:8}},[s("course-group-manager")],1),s("a-col",{staticStyle:{display:"flex","justify-content":"center"},attrs:{span:8}},[s("el-row",{staticStyle:{display:"flex","justify-content":"center"},attrs:{type:"flex",gutter:8,justify:"end"}},[s("el-col",[s("course-select-system")],1),s("el-col",[s("message-room")],1),s("el-col",[s("user-login-drawer")],1)],1)],1)],1)],1)},F=[],B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"NCTUDDB-login"},[s("a-button",{attrs:{size:"small",icon:"el-icon-chat-round",shape:"round"},on:{click:e.showDrawer}},[s("span",{staticClass:"hidden-sm-and-down"},[e._v(e._s(e.userName))]),s("a-icon",{attrs:{type:"user"}})],1),s("el-drawer",{attrs:{size:"70%",visible:e.isDrawerShow,direction:"rtl"},on:{"update:visible":function(t){e.isDrawerShow=t}}},[s("el-card",{staticStyle:{"border-radius":"30px"}},[s("span",[s("el-avatar",{attrs:{icon:"el-icon-user-solid"}}),s("div",[s("a",[e._v(e._s(e.userName))]),s("el-input",{attrs:{placeholder:"輸入給別人看的暱稱"},model:{value:e.user.displayName,callback:function(t){e.$set(e.user,"displayName",t)},expression:"user.displayName"}},[e._v(e._s(e.userName))])],1)],1)]),s("el-dropdown",[s("el-button",{attrs:{type:"primary"}},[e._v(" "+e._s(e.user.dep)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.depOptions,(function(t){return s("el-dropdown-item",{key:t.cname,nativeOn:{click:function(s){e.user.dep=t.cname}}},[e._v(" "+e._s(t.cname)+" ")])})),1)],1),s("el-dropdown",[s("el-button",{attrs:{type:"primary"}},[e._v(" "+e._s(e.user.grade)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(t){e.user.grade="大一"}}},[e._v("大一")]),s("el-dropdown-item",{nativeOn:{click:function(t){e.user.grade="大二"}}},[e._v("大二")]),s("el-dropdown-item",{nativeOn:{click:function(t){e.user.grade="大三"}}},[e._v("大三")]),s("el-dropdown-item",{nativeOn:{click:function(t){e.user.grade="大四"}}},[e._v("大四")])],1)],1),e.isLogin?s("el-button",{on:{click:e.signOutUser}},[s("h1",[e._v("登出")])]):s("el-button",{staticStyle:{width:"100%"}},[s("el-link",{attrs:{href:"https://id.nctu.edu.tw/o/authorize/?client_id=4JrFF39B22st9E8U6ZnFjbUEMDNO1MfnTs005FOH&response_type=code&scope=profile%20name%20status"}},[s("h1",[e._v("以 NCTU OAuth 登入")])])],1)],1)],1)},M=[],V=(s("b0c0"),s("99af"),s("4160"),s("a434"),s("b64b"),s("d3b7"),s("ac1f"),s("a1f0"),s("5319"),s("1276"),s("159b"),s("ddb0"),s("96cf"),s("1da1")),K=s("bc3a").default;function q(){return{list:[],scheduleSlots:H((function(){return[]})),slotsFilled:H((function(){return!1})),listID:[]}}function J(e){if(e.time){var t=e.time.split("-");e.rawTimeslot=t[0],t.length>1&&(e.location=t[1]);var s,o=t[0],n=Object(l["a"])("0123456789");try{for(n.s();!(s=n.n()).done;){var r=s.value;o=o.replace(r,"*"+r)}}catch(v){n.e(v)}finally{n.f()}var a=o.split("*");e.timeSchedules=[];var i,u=Object(l["a"])(a);try{for(u.s();!(i=u.n()).done;){var c,d=i.value,p=d[0],f=Object(l["a"])(d.substring(1));try{for(f.s();!(c=f.n()).done;){var h=c.value,m=p+h;e.timeSchedules.push(m)}}catch(v){f.e(v)}finally{f.f()}}}catch(v){u.e(v)}finally{u.f()}}else e.rawTimeslot="",e.timeSchedules=[];return e}function H(e){var t,s="1234567".split(""),o="MNABCDEXEFGHYIJKL".split(""),n={},r=Object(l["a"])(s);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,u=Object(l["a"])(o);try{for(u.s();!(a=u.n()).done;){var c=a.value;n[i+c]=e()}}catch(d){u.e(d)}finally{u.f()}}}catch(d){r.e(d)}finally{r.f()}return n}function Q(){return W.apply(this,arguments)}function W(){return W=Object(V["a"])(regeneratorRuntime.mark((function e(){var t,s,o,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Fetch online timetable..."),t="https://script.google.com/macros/s/AKfycbycThyD0_VpEpHACky9MCppOVIP33Pn1rV5NuFbqPZJRckmw0IG/exec",e.next=4,K.get(t);case 4:for(n in s=e.sent,o=s.data,console.log(" resp.data",o),o)r=o[n],r=J(r),o[n]=r;return console.log("Loaded courses",Object.keys(o).length,o),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function Y(e,t){if(!t)return e;var s=e.listID.includes(t.id);if(s){console.log(e,t);var o=e.list.indexOf(t);e.list.splice(o,1);var n=e.listID.indexOf(t.id);e.listID.splice(n,1);var r,a=Object(l["a"])(t.timeSchedules);try{for(a.s();!(r=a.n()).done;){var i=r.value;e.scheduleSlots[i].splice(t),0===e.scheduleSlots[i].length&&(e.slotsFilled[i]=!1)}}catch(u){a.e(u)}finally{a.f()}}else e.list.push(t),e.listID.push(t.id),t.timeSchedules.forEach((function(s){return e.scheduleSlots[s].push(t)})),t.timeSchedules.forEach((function(t){return e.slotsFilled[t]=!0}));return e}function X(e){var t,s={},o=[],n=Object(l["a"])(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r["授課語言代碼"],i=r.cname;"en-us"!==a?(s[i]||(s[i]=[]),s[i].push(r)):o.push(r)}}catch(O){n.e(O)}finally{n.f()}for(var u=0,c=o;u<c.length;u++)for(var d=c[u],p=0,f=Object.keys(s);p<f.length;p++){var h=f[p];if(d.cname.includes(h)){s[h].push(d);break}}var m,v=[],w=Object.values(s),b=w.filter((function(e){return e.length>1})),g=Object(l["a"])(b);try{for(g.s();!(m=g.n()).done;){var C=m.value;v=v.concat(C)}}catch(O){g.e(O)}finally{g.f()}var y,_=[],j=w.filter((function(e){return 1===e.length})),k=Object(l["a"])(j);try{for(k.s();!(y=k.n()).done;){var x=y.value;_=_.concat(x)}}catch(O){k.e(O)}finally{k.f()}return{uniqueCourses:_,dupCourses:v}}function Z(e){var t,s={"在職專班":{cname:"在職專班",child:[],keyword:"專班"},"碩士班":{cname:"碩士班",child:[],keyword:"碩士"},"博士班":{cname:"博士班",child:[],keyword:"博士"},"研究所":{cname:"研究所",child:[],keyword:"研究所"},"跨域學程":{cname:"跨域學程",child:[],keyword:"跨域學程"},"學分學程":{cname:"學分學程",child:[],keyword:"學程"},"大學部":{cname:"大學部",child:[],keyword:"系"},"其他":{cname:"其他",child:[],keyword:""}},o=Object(l["a"])(e);try{for(o.s();!(t=o.n()).done;){var n=t.value,r=n.cname;for(var a in s){var i=s[a].keyword;if(r.includes(i)){s[a].child.push(n);break}}}}catch(u){o.e(u)}finally{o.f()}return s}function ee(e){var t,s={},o=Object(l["a"])(e);try{for(o.s();!(t=o.n()).done;){var n=t.value;n.leaf=!1;var r=n.dep_cname;s[r]||(s[r]={cname:r,child:[]}),s[r].child.push(n)}}catch(a){o.e(a)}finally{o.f()}return s}function te(e){e+="\n0000";var t,s=/[0-9]{4}[\s\S]+?(?=[0-9]{4})/g,o=e.matchAll(s),n={},r=Object(l["a"])(o);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,u=i[0].replaceAll("\t"," | ").replace("\n",""),c=u.split(" | "),d="當期課號 | 開課單位 | 備註 | 課名 | 人上限 | 已登記 | 志願1 | 志願2 | 志願3 | 志願4 | 志願5 | 時間地點 | 學分 | 時數 | 老師 | 類別 | 備註".split(" | "),p={},f=Object(l["a"])(Array(c.length).keys());try{for(f.s();!(a=f.n()).done;){var h=a.value;p[d[h]]=c[h]}}catch(m){f.e(m)}finally{f.f()}"不限"===p["人上限"]&&(p["人上限"]=9999),p["剩餘空位"]=parseInt(p["人上限"])-parseInt(p["已登記"]),p["第一志願機率"]=Math.round(100*p["剩餘空位"]/(parseInt(p["志願1"])+1)),n[c[0]]=p}}catch(m){r.e(m)}finally{r.f()}return n}var se={name:"UserLoginDrawer",data:function(){return{isDrawerShow:!1,account:"",password:"",depOptions:[]}},methods:{showDrawer:function(){this.isDrawerShow=!0,this.depOptions=Z(Object.values(ee(this.allCoursesList)))["大學部"].child},signOutUser:function(){this.user.loginInfo={name:"anonymous",login:!1,code:null,expire:null}}},computed:{isLogin:function(){return this.user.loginInfo.login},userName:function(){return this.isLogin?this.user.loginInfo.name:"未登入"}}},oe=se,ne=Object(w["a"])(oe,B,M,!1,null,null,null),re=ne.exports,ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"course-group-manager"},[s("el-row",{staticStyle:{display:"flex","justify-content":"center"},attrs:{type:"flex",gutter:8}},[s("el-col",[s("el-link",{attrs:{href:"https://www.facebook.com/NiceCourseToU/"}},[s("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:"https://upload.cc/i1/2020/09/07/NHSTyE.png"}})],1)],1),s("el-col",[s("a-button",{attrs:{shape:"round",size:"small"},on:{click:e.openShareAlert}},[s("a-icon",{attrs:{type:"area-chart"}}),s("span",{staticClass:"hidden-sm-and-down"},[e._v("分享課程")])],1)],1),s("el-col",[s("a-button",{attrs:{shape:"round",size:"small"},on:{click:e.openImportAlert}},[s("a-icon",{attrs:{type:"area-chart"}}),s("span",{staticClass:"hidden-sm-and-down"},[e._v("匯入選上率")])],1)],1),s("el-col",[s("a-badge",{attrs:{dot:""}},[s("a-button",{attrs:{shape:"round",size:"small"},on:{click:e.openImportSelectedAlert}},[s("a-icon",{attrs:{type:"import"}}),s("span",{staticClass:"hidden-sm-and-down"},[e._v("匯入已選課")])],1)],1)],1)],1),s("course-detail-drawer"),s("el-drawer",{attrs:{visible:e.openCourseGroup,direction:"ltr",size:"70%",title:"選擇課程群組"},on:{"update:visible":function(t){e.openCourseGroup=t}}},[s("el-table",{attrs:{data:e.presentCourseGroup,"highlight-current-row":!0,"empty-text":"無課程",height:"600",size:"mini"},on:{"row-click":e.clickCourseGroup}},[s("el-table-column",{attrs:{labe:"選擇課程表",prop:"groupKey"}})],1),s("el-button",{staticClass:"add-course-group-button",attrs:{plain:"",type:"primary"},on:{click:e.addCourseGroup}},[e._v("+ 新增課程表")])],1)],1)},ie=[],ue=(s("d81d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-drawer",{staticClass:"drawer",attrs:{direction:"rtl",type:"primary",modal:!1,visible:e.courseOption.courseDetail.showDetail},on:{open:e.getCourseDetail,"update:visible":function(t){return e.$set(e.courseOption.courseDetail,"showDetail",t)}}},[s("h2",[e._v(e._s(e.detailedCourse.cname))]),s("br"),s("el-link",{attrs:{href:"https://timetable.nctu.edu.tw/?r=main/crsoutline&Acy=109&Sem=1&CrsNo="+e.detailedCourse.id+"&lang=zh-tw"}},[s("h2",[e._v("前往查看課程詳細資料")])]),s("br"),s("el-tag",{directives:[{name:"show",rawName:"v-show",value:0===e.detailedCourse.credit,expression:"detailedCourse.credit === 0"}],attrs:{type:e.selectTypeKey[e.detailedCourse.type],size:"mini",effect:"dark","disable-transitions":""}},[e._v(e._s(e.detailedCourse.type+"0 學分"))]),e._l(Array(e.detailedCourse.credit).keys(),(function(t){return s("el-tag",{key:t,attrs:{type:e.selectTypeKey[e.detailedCourse.type],size:"mini",effect:"dark","disable-transitions":""}},[e._v(e._s(e.detailedCourse.type))])})),s("br"),s("p",[e._v(e._s(e.detailedCourse.memo))]),e._l(e.filterField(e.detailedCourse),(function(t){return s("el-tag",{key:t,attrs:{type:"info",size:"large",effect:"dark","disable-transitions":""}},[e._v(e._s(t))])})),s("el-tabs",{model:{value:e.activeCollapse,callback:function(t){e.activeCollapse=t},expression:"activeCollapse"}},[s("el-tab-pane",{attrs:{label:"課程完整資訊",name:"1"}},[e.discuss.title?s("el-tab-pane",{attrs:{label:"課程心得",name:"2"}}):e._e()],1)],1),"1"===e.activeCollapse?s("iframe",{attrs:{width:"100%",height:"100%",src:"https://timetable.nctu.edu.tw/?r=main/crsoutline&Acy=109&Sem=1&CrsNo="+e.detailedCourse.id+"&lang=zh-tw"}}):s("div",[e._v("課程心得 from NCTU+"),s("h3",[e._v(e._s(e.discuss.title)+" - "+e._s(e.discuss.user_name))]),s("a",[e._v(e._s("https://plus.nctu.edu.tw/discusses/"+e.discuss.id))]),s("div",[e._v(e._s(e.discuss.content))])])],2)}),ce=[],le={name:"CourseDetailDrawer",data:function(){return{discuss:{},activeCollapse:"1"}},computed:{detailedCourse:function(){var e;return null!==(e=this.courseOption.courseDetail.showCourse)&&void 0!==e?e:{}},selectTypeKey:function(){return{"必修":"warning","選修":"","通識":"danger"}}},methods:{getCourseDetail:function(){var e=this;return Object(V["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.discuss=e.getDiscuss(),e.discuss||(e.discuss={});case 2:case"end":return t.stop()}}),t)})))()},getDiscuss:function(){var e=this.$store.state.coursesDiscuss[this.detailedCourse.code];return console.log(e),e},filterField:function(e){var t={teacher:"教授: ",dep_cname:"系所: ",memo:"",reg_num:"登記人數: ",rawTimeslot:"時段: ",hours:"時數: ",depType:"",id:"永久課號: ",location:"地點: "},s=[];for(var o in t){var n=e[o];n&&s.push("".concat(t[o]," ").concat(e[o]))}return s},selectType:function(e){return this.selectTypeKey[e]}}},de=le,pe=(s("6154"),Object(w["a"])(de,ue,ce,!1,null,null,null)),fe=pe.exports;function he(e){return Object.values(e)}function me(e){return console.log(e)}function ve(e,t){return Object.assign(e,t)}var we=s("bc3a"),be=s.n(we),ge="https://cors-anywhere.herokuapp.com/",Ce=["courseGroups","courseGroupsAvailable","usingCourse","timetableOptions","user","coursesDiscuss","coursesExtension"],ye=["courseGroups","courseGroupsAvailable","usingCourse","user","coursesExtension"];function _e(e){var t,s=Object(l["a"])(Ce);try{for(s.s();!(t=s.n()).done;){var o=t.value;localStorage.setItem(o,JSON.stringify(e[o]))}}catch(n){s.e(n)}finally{s.f()}console.log("Session saved")}function je(e){var t=!1,s=localStorage.getItem(e),o=null;try{o=JSON.parse(s)}catch(n){o=s}return t?null:o}var ke={name:"course-group-manager",components:{CourseDetailDrawer:fe},methods:{showCourseGroupManager:function(){this.openCourseGroup=!0},clickCourseGroup:function(e){console.log("Clicked course:",e),this.$store.commit("switchCourseGroup",e.groupKey),this.openCourseGroup=!1},addCourseGroup:function(){var e=this;this.$prompt("請輸入新的課程表名稱","提示",{cancelButtonText:"取消",confirmButtonText:"新增"}).then((function(t){var s=t.value;e.$message({type:"success",message:"已新增課程表: "+s}),e.$store.commit("switchCourseGroup",s),e.openCourseGroup=!1}))},openShareAlert:function(){var e=this.$store.state.domain;e+="?importCourseGroupName="+this.$store.state.usingCourse+"&";var t=this.$store.state.courseGroups[this.$store.state.usingCourse].list.map((function(e){return"".concat(e.acy).concat(e.sem,"_").concat(e.id)}));e+="?importCoursesID="+t,this.$prompt("複製以下連結來分享給朋友吧","分享課程表",{confirmButtonText:"確定",inputValue:e})},openImportAlert:function(){var e=this,t="";this.$prompt("分析課程選上機率，選通識不再眼花撩亂。\n從選課網站全選複製，然後貼在下面吧！","匯入個人選課資訊(Beta)",{confirmButtonText:"確定",inputValue:t}).then((function(t){var s=t.value,o=te(s);e.$store.commit("loadCourseExtension",o),e.$message.info("已匯入 ".concat(he(o).length," 門課程的志願序機率"))}))},openImportSelectedAlert:function(){var e=this,t="";this.$prompt("選完的課全部丟進來NiceCourseToU，哪裡衝堂一看就知道。\n複製「確認選課狀況」>「查詢選課狀況」的所有文字，貼在下面吧！\n(\n          不要像作者重稻覆轍用通識衝堂計網概必修嗚嗚嗚(PД`q。)·。","匯入選課系統內已選課程(Beta)",{confirmButtonText:"確定",inputValue:t}).then((function(t){var s=t.value,o=te(s);console.log(o);var n=e.allSelectedCourses.map((function(e){return e.id}));console.log(e.allSelectedCourses);for(var r=0,a=Object.keys(o);r<a.length;r++){var i=a[r],u="1091_".concat(i),c=e.allCourses[u];c&&(n.includes(i)?console.log("Course ".concat(c.cname," has added and skipped")):(e.updateCourse(c),console.log("Course ".concat(c.cname," added"))))}e.$message.info("已匯入 ".concat(he(o).length," 門已選課程"))}))},syncSession:function(){var e,t=this,s=this.$store.state,o=ge+"https://docs.google.com/forms/d/e/1FAIpQLSceXYLXYAAUwu8RoLl61VcAJyCSG0MXASBNEWyx1mhBNVR3_Q/formResponse",n={},r=Object(l["a"])(ye);try{for(r.s();!(e=r.n()).done;){var a=e.value;n[a]=s[a]}}catch(u){r.e(u)}finally{r.f()}var i={"entry.118437476":JSON.stringify(n),"entry.751211111":s.user.loginInfo.name};console.log(i),be()({method:"get",url:o,params:i}).then((function(){return t.$message.info("已同步完成")})).catch((function(e){return t.$message.info("同步失敗 ".concat(e))}))},downloadSession:function(){return Object(V["a"])(regeneratorRuntime.mark((function e(){var t,s,o,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="1Hc747yTIiMghbF4ZjHYLuQT-98NwKTvsAH6qWFt_Aew",s="1",o=ge+"https://spreadsheets.google.com/feeds/list/".concat(t,"/").concat(s,"/public/values?alt=json"),e.next=5,be.a.get(o).catch((function(e){this.$notify({title:"無法讀取聊天室內容",message:e,type:"danger"})}));case 5:n=e.sent,n.data&&(r=n.data.feed.entry,console.log(r));case 7:case"end":return e.stop()}}),e)})))()}},computed:{openCourseGroup:{get:function(){return this.$store.state.user.showCoursesGroupManager},set:function(e){this.$store.state.user.showCoursesGroupManager=e}},presentCourseGroup:function(){var e=[];return e=this.$store.state.courseGroupsAvailable.map((function(e){return{groupKey:e}})),e}}},xe=ke,Oe=(s("c970"),Object(w["a"])(xe,ae,ie,!1,null,null,null)),Se=Oe.exports,Ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"message-room"},[s("a-badge",{attrs:{dot:""}},[s("a-button",{attrs:{size:"small",icon:"el-icon-chat-round",shape:"round"},on:{click:e.showDrawer}},[s("span",{staticClass:"hidden-sm-and-down"},[e._v("問甜課/回報Bug")]),s("a-icon",{attrs:{type:"message"}})],1)],1),s("el-drawer",{attrs:{size:"70%",modal:!1,visible:e.isDrawerOpen,"with-header":!1,"show-close":!1},on:{"update:visible":function(t){e.isDrawerOpen=t}}},[s("el-container",[s("el-main",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.messages,"empty-text":"沒有訊息","row-class-name":"message-box","max-height":"600"}},[s("el-table-column",{attrs:{prop:"content",label:"課程心得聊天室"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-icon",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"el-icon-loading"}),e._v(" "+e._s(t.row.sender)),s("br"),s("el-card",{staticStyle:{"border-radius":"20px"},attrs:{"body-style":{padding:"10px"},type:t.row.sender===e.userName?"info":"success"}},[e._v(e._s(t.row.content))]),s("div",{staticStyle:{opacity:".5","font-size":"6px"}},[e._v(e._s(t.row["時間戳記"]))])]}}])})],1)],1),s("el-footer",[s("div",[s("el-input",{attrs:{type:"textarea",autosize:!0,disabled:!1,placeholder:this.user.loginInfo.login?"以"+this.userName+" 發表":"匿名留言"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),s("el-button",{staticClass:"el-icon-s-promotion",staticStyle:{width:"100%"},attrs:{slot:"suffix",disabled:0===e.message.length,round:""},on:{click:e.sendMessage},slot:"suffix"})],1)])],1)],1)],1)},$e=[],Te="https://cors-anywhere.herokuapp.com/",Ne="1Hc747yTIiMghbF4ZjHYLuQT-98NwKTvsAH6qWFt_Aew",Ge="o63g0x1",ze=Te+"https://spreadsheets.google.com/feeds/list/"+Ne+"/"+Ge+"/public/values?alt=json",Ee=Te+"http://docs.google.com/forms/d/e/1FAIpQLSf7scJrM7U88pLlKcWHRhCzo1zReKr8TuP0F_hzSv9216RoFw/formResponse",De={name:"message-room",data:function(){return{isDrawerOpen:!1,messages:[{sender:"讀取中",content:"修但幾勒.../ 小等一下..."}],message:"",inboxUrl:Ee,isLoading:!1}},methods:{showDrawer:function(){this.isDrawerOpen=!0,this.loadRemote()},loadRemote:function(){var e=this;return Object(V["a"])(regeneratorRuntime.mark((function t(){var s,o,n,r,a,i,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,be.a.get(ze).catch((function(e){this.$notify({title:"無法讀取聊天室內容",message:e,type:"danger"})}));case 3:s=t.sent,o=s.data.feed.entry,n=[],r=Object(l["a"])(o);try{for(r.s();!(a=r.n()).done;){for(c in i=a.value,u={},i)c.includes("gsx$")&&(u[c.split("gsx$")[1]]=i[c]["$t"]),c.includes("gsx$")&&(u[c.split("gsx$")[1]]=i[c]["$t"]);n.push(u)}}catch(d){r.e(d)}finally{r.f()}e.messages=n.reverse(),e.isLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},sendMessage:function(){var e=this,t=this.message,s=this.userName;this.messages.unshift({sender:s,content:t});var o={"entry.1060195956":s,"entry.426088393":t};console.log(o),be()({method:"get",url:Ee,params:o}).then((function(){return e.loadRemote()})).catch((function(t){return e.$notify({title:"無法送出訊息",message:t,type:"danger"})})),this.message=""}},computed:{userName:function(){var e;return"".concat((null!==(e=this.user.displayName)&&void 0!==e?e:"").length>0?this.user.displayName:this.user.loginInfo.name," ").concat(this.user.dep," ").concat(this.user.grade)}},created:function(){}},Pe=De,Ae=(s("97b6"),Object(w["a"])(Pe,Ie,$e,!1,null,null,null)),Le=Ae.exports,Re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-badge",{attrs:{dot:""}},[s("a-button",{attrs:{size:"small",icon:"el-icon-chat-round",shape:"round"},on:{click:e.showDrawer}},[s("span",{staticClass:"hidden-sm-and-down"},[e._v("選課系統")]),s("a-icon",{attrs:{type:"edit"}})],1)],1),s("el-drawer",{attrs:{modal:!1,visible:e.isDrawerShow,"before-close":e.handleClose,"show-close":!1,direction:"rtl",size:"70%"},on:{"update:visible":function(t){e.isDrawerShow=t}}},[s("el-button",{on:{click:function(t){e.isDrawerShow=!1}}},[e._v("關閉選課系統")]),s("iframe",{attrs:{height:"100%",src:"https://course.nctu.edu.tw/",width:"100%"}})],1)],1)},Ue=[],Fe={name:"course-select-system",data:function(){return{isDrawerShow:!1,isWarned:!1}},methods:{showDrawer:function(){var e=this;this.isWarned?this.isDrawerShow=!0:this.$alert('由於學校選課系統的限制，此功能需關閉<strong">隱私設定</strong>，\n                     否則會無法登入系統。請務必在選課完成後復原設定。\n                     <br>若要繼續使用，請使用chrome前往以下網址，<br>並調整"SameSite by default cookies"為「Disabled/關閉」。\n',"使用前須知",{showCancelButton:!0,showClose:!1,confirmButtonText:"打開選課系統",cancelButtonText:"了解更多",type:"warning",dangerouslyUseHTMLString:!0,showInput:!0,inputValue:"chrome://flags/#same-site-by-default-cookies"}).then((function(){e.isDrawerShow=!0,e.isWarned=!0})).catch((function(){window.open("https://medium.com/@azure820529/chrome-80-%E5%BE%8C%E9%87%9D%E5%B0%8D%E7%AC%AC%E4%B8%89%E6%96%B9-cookie-%E7%9A%84%E8%A6%8F%E5%89%87%E8%AA%BF%E6%95%B4-default-samesite-lax-aaba0bc785a3")}))},handleClose:function(){}},computed:{}},Be=Fe,Me=Object(w["a"])(Be,Re,Ue,!1,null,null,null),Ve=Me.exports,Ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-col",{staticClass:"hidden-sm-and-down",staticStyle:{"font-size":"30px","font-weight":"bolder","text-align":"center"},attrs:{span:8}},[e._v("NiceCourseToU")]),s("el-col",{staticClass:"hidden-md-and-up",staticStyle:{"font-size":"16px","font-weight":"bolder","text-align":"center"},attrs:{span:8}},[e._v("NiceCourseToU")])],1)},qe=[],Je={name:"logo-title"},He=Je,Qe=Object(w["a"])(He,Ke,qe,!1,null,null,null),We=Qe.exports,Ye={name:"TopNavBar",components:{LogoTitle:We,CourseSelectSystem:Ve,MessageRoom:Le,CourseGroupManager:Se,UserLoginDrawer:re},data:function(){return{showLoginDrawer:!1}},methods:{showLogin:function(){this.$store.state.user.loginInfo.showLoginDrawer=!0}}},Xe=Ye,Ze=(s("86b2"),Object(w["a"])(Xe,U,F,!1,null,null,null)),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-layout",[s("course-selection-progress",{attrs:{active:e.active},on:{"update:active":function(t){e.active=t}}}),s("fixed-course-selection",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active===1"}]}),s("draw-course-selection",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active===2"}]}),s("all-courses-selection",{directives:[{name:"show",rawName:"v-show",value:3===e.active,expression:"active===3"}]}),s("selected-courses",{directives:[{name:"show",rawName:"v-show",value:4===e.active,expression:"active===4"}]})],1)},st=[],ot=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"外文",name:"外語"}}),s("el-tab-pane",{attrs:{label:"通識",name:"素養"}}),s("el-tab-pane",{attrs:{label:"體育",name:"體育"}}),s("el-tab-pane",{attrs:{label:"微積分",name:"微積分"}}),s("el-tab-pane",{attrs:{label:"物理",name:"物理"}}),s("el-tab-pane",{attrs:{label:"軍訓",name:"軍訓"}}),s("el-tab-pane",{attrs:{label:"系共同必修",name:"共同必修"}})],1),s("el-button",{attrs:{size:"mini"},on:{click:e.showSoonNotification}},[e._v(" 幫我排志願序！")]),s("el-row",[s("el-col",{attrs:{span:24}},[s("course-list-simplified",{attrs:{"present-courses":e.presentCourses}})],1)],1)],1)},nt=[],rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"demo-infinite-container"},[s("a-list",{attrs:{"max-height":"500",header:"課程清單","highlight-current-row":!0,split:!1,dataSource:e.presentCourses,"empty-text":"無課程",size:"small"},scopedSlots:e._u([{key:"renderItem",fn:function(t){return s("a-list-item",{staticClass:"course-block",nativeOn:{click:function(s){return e.showCourseDetail(t)}}},[s("course-entry-large-title",{attrs:{course:t}})],1)}}])})],1)},at=[],it=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-list-item-meta",{attrs:{description:e.course.teacher+" | "+e.course.dep_cname+" | "+e.course.time}},[s("a-space",{attrs:{slot:"avatar",direction:"vertical",align:"center"},slot:"avatar"},[s("a-button",{attrs:{shape:"circle",type:e.coursesAdded?"primary":"",icon:e.coursesAdded?"minus":"plus"},on:{click:function(t){return t.stopPropagation(),e.updateCourse(e.course)}}}),s("a-progress",{directives:[{name:"show",rawName:"v-show",value:!e.courseExtension.extensionNotExist,expression:"!courseExtension.extensionNotExist"}],attrs:{width:35,type:"circle",percent:e.courseExtension["第一志願機率"]},scopedSlots:e._u([{key:"format",fn:function(t){return[s("span",{style:{color:e.courseExtension["第一志願機率"]<=0?"gray":"black"}},[e._v(e._s(e.showChance))])]}}])})],1),s("p",{staticClass:"course-name",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.course.cname))])],1)},ut=[],ct={name:"course-entry-large-title",props:{course:{}},computed:{courseExtension:function(){var e=this.course.id,t=this.$store.state.coursesExtension[e];return null!==t&&void 0!==t?t:{extensionNotExist:!0}},coursesAdded:{get:function(){return this.allSelectedCourses.includes(this.course)},set:function(){}},showChance:function(){var e=this.courseExtension;return e["第一志願機率"]>100?"保送😎":e["第一志願機率"]<=0&&e["第一志願機率"]>-10?"滿惹😢":e["第一志願機率"]<-10?"加簽完辣乾":String(e["第一志願機率"])+"%"}}},lt=ct,dt=(s("0fb6"),Object(w["a"])(lt,it,ut,!1,null,null,null)),pt=dt.exports,ft=s("e508"),ht={name:"course-list-simplified",components:{CourseEntryLargeTitle:pt,RecycleScroller:ft["a"]},props:{presentCourses:{}},methods:{}},mt=ht,vt=(s("3941"),Object(w["a"])(mt,rt,at,!1,null,null,null)),wt=vt.exports,bt={name:"draw-course-selection",components:{CourseListSimplified:wt},data:function(){return{activeName:"素養"}},methods:{handleClick:function(e,t){console.log(e,t)},showSoonNotification:function(){this.$alert("這項功能將分析同類所有課程的選上機率，用數學排出最佳選課志願序，選課不再像玩樂透，讓你選好課又選搶手課！","將在選課期間開放",{confirmButtonText:"9/7 開放"})}},computed:{presentCourses:function(){var e=this,t=this.user.dep.substr(0,2),s=this.allCoursesList,o={"外語":function(t){return t.type.includes(e.activeName)},"素養":function(t){return t.brief.includes(e.activeName)&&!t.cname.includes("微積分")},"體育":function(t){return t.brief.includes(e.activeName)},"微積分":function(e){return e.cname.includes("微積分")},"物理":function(e){return("物理(一)"===e.cname||"物理(一)榮譽班"===e.cname)&&e.type.includes("必修")},"軍訓":function(e){return e.brief.includes("軍訓")},"共同必修":function(s){return s.dep_cname.includes(e.activeName)||s.memo.includes(e.activeName)||s.dep_cname.includes(t)}};return s=s.filter(o[this.activeName]),"共同必修"===this.activeName&&(s=s.filter((function(e){return!("物理(一)"===e.cname||"物理(一)榮譽班"===e.cname)})),s=s.filter((function(e){return!e.cname.includes("微積分")})),s=s.filter((function(e){return!e.cname.includes("體育")})),s=s.filter((function(e){return e.dep_cname.includes(t)})),s=X(s).dupCourses),s}}},gt=bt,Ct=Object(w["a"])(gt,ot,nt,!1,null,null,null),yt=Ct.exports,_t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-tree",{attrs:{props:e.props,load:e.loadNode,"node-click":e.nodeClick,"expand-on-click-node":!1,lazy:""},on:{"check-change":e.handleCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,n=t.data;return s("div",{staticClass:"custom-tree-node",staticStyle:{width:"90%"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:3!==o.level,expression:"node.level !== 3"}],attrs:{type:"flex"}},[s("a",{staticStyle:{"font-size":"16px"}},[e._v(e._s(o.label))])]),s("span",{directives:[{name:"show",rawName:"v-show",value:3===o.level,expression:"node.level === 3"}],staticStyle:{width:"90%"}},[s("el-row",{staticClass:"row-bg",staticStyle:{width:"90%"},attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:20}},[s("a",{staticStyle:{"font-size":"16px","font-weight":"bolder"}},[e._v(e._s(n.cname))]),s("a",{staticStyle:{"font-size":"10px",opacity:"0.5"}},[e._v("-"+e._s(n.teacher))])]),s("el-col",{attrs:{span:4}},[s("el-button",{attrs:{size:"mini",circle:"",icon:e.coursesAdded(n)?"el-icon-minus":"el-icon-plus"},on:{click:function(t){return e.updateCourse(n)}}}),s("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-s-opportunity"},on:{click:function(t){return e.showCourseDetail(n)}}})],1)],1)],1)])}}])})},jt=[],kt={name:"all-course-selection",data:function(){return{props:{label:"cname",children:"child",isLeaf:"leaf"},count:1}},methods:{handleCheckChange:function(e,t,s){console.log(e,t,s)},handleNodeClick:function(e){console.log(e)},loadNode:function(e,t){var s=ee(this.allCoursesList),o=Z(Object.values(s));return 0===e.level?t(Object.values(o).reverse()):e.level>3?t([]):void setTimeout((function(){if(1===e.level){var n=e.data.cname,r=o[n],a=r.child.slice();return t(a)}if(2===e.level){console.log("Present node level 2");var i=e.data.cname,u=s[i].child,c=u.slice();return t(c)}t([])}),500)},nodeClick:function(e,t,s){console.log(e),console.log(t),console.log(s)}}},xt=kt,Ot=Object(w["a"])(xt,_t,jt,!1,null,null,null),St=Ot.exports,It=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a-divider",{attrs:{orientation:"left"}},[e._v(e._s(e.user.dep)+" 必修")]),s("course-list-simplified",{attrs:{"present-courses":e.presentCourses,"courses-source":e.allCoursesList}})],1)},$t=[],Tt={name:"fixed-course-selection",components:{CourseListSimplified:wt},data:function(){return{activeName:"素養"}},methods:{handleClick:function(e,t){console.log(e,t)}},computed:{presentCourses:function(){var e=this,t=this.allCoursesList,s=function(t){return t.dep_cname.includes(e.user.dep)};t=t.filter(s),console.log("Courses:",t),t=X(t).uniqueCourses,console.log(t);var o=this.searchString;return o&&(t=t.filter((function(e){e.desc.includes(o)}))),t}}},Nt=Tt,Gt=(s("1f5b"),Object(w["a"])(Nt,It,$t,!1,null,null,null)),zt=Gt.exports,Et=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-steps",{attrs:{current:e.active,size:"small","label-placement":"vertical",initial:1}},[s("a-step",{nativeOn:{click:function(t){return e.forward(1)}}},[s("a-icon",{attrs:{slot:"icon",type:"select"},slot:"icon"}),s("a-popover",{attrs:{slot:"title",placement:"bottom"},slot:"title"},[s("span",[e._v("登記必修")]),s("template",{slot:"content"},[s("span",[e._v("系上保證上的課")]),s("br"),s("span",[e._v("點我進入該類課程清單")])])],2)],1),s("a-step",{nativeOn:{click:function(t){return e.forward(2)}}},[s("a-icon",{attrs:{slot:"icon",type:"tags"},slot:"icon"}),s("a-popover",{attrs:{slot:"title",placement:"bottom"},slot:"title"},[s("span",[e._v("抽籤必修")]),s("template",{slot:"content"},[s("span",[e._v("要排志願序的課")]),s("br"),s("span",[e._v("點我進入該類課程清單")])])],2)],1),s("a-step",{nativeOn:{click:function(t){return e.forward(3)}}},[s("a-icon",{attrs:{slot:"icon",type:"search"},slot:"icon"}),s("a-popover",{attrs:{slot:"title",placement:"bottom"},slot:"title"},[s("span",[e._v("其他選修")]),s("template",{slot:"content"},[s("span",[e._v("其他想修的課")]),s("br"),s("span",[e._v("點我進入該類課程清單")])])],2)],1)],1)},Dt=[],Pt={name:"course-selection-progress",props:{active:{}},methods:{forward:function(e){this.$emit("update:active",e),console.log("elstep",e)}}},At=Pt,Lt=(s("c5c1"),Object(w["a"])(At,Et,Dt,!1,null,null,null)),Rt=Lt.exports,Ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("course-list-simplified",{attrs:{"courses-source":e.allCoursesList,"present-courses":e.presentCourses}})],1)},Ft=[],Bt={name:"selected-courses",components:{CourseListSimplified:wt},computed:{presentCourses:function(){var e=this.allSelectedCourses;return e}}},Mt=Bt,Vt=Object(w["a"])(Mt,Ut,Ft,!1,null,null,null),Kt=Vt.exports,qt={name:"CourseClassifiedList",components:{SelectedCourses:Kt,CourseSelectionProgress:Rt,FixedCourseSelection:zt,AllCoursesSelection:St,DrawCourseSelection:yt},data:function(){return{active:1}},methods:{}},Jt=qt,Ht=Object(w["a"])(Jt,tt,st,!1,null,null,null),Qt=Ht.exports,Wt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{on:{mouseleave:function(t){return e.hoverOnGrid(null,null)}}},[s("a-row",{staticClass:"weekday-header",attrs:{type:"flex",justify:"space-between",align:"stretch"}},[s("a-col",{staticClass:"empty-placeholder",attrs:{span:1}},[s("h1",[e._v(e._s(" "))])]),e._l(e.weekdays,(function(t){return s("a-col",{key:t,staticClass:"empty-placeholder",attrs:{span:4}},[s("transition",{attrs:{name:"el-zoom-in-top"}},[s("h1",{directives:[{name:"show",rawName:"v-show",value:e.hoverOn.weekday===t||null===e.hoverOn.weekday,expression:"hoverOn.weekday === d || hoverOn.weekday === null"}],style:{opacity:e.hoverOn.weekday===t||null===e.hoverOn.weekday?1:.2}},[e._v(e._s(t))])]),s("h1",{directives:[{name:"show",rawName:"v-show",value:e.hoverOn.weekday!==t,expression:"hoverOn.weekday !== d"}]},[e._v(e._s(" "))])],1)}))],2),e._l(["ABCD","EFGH","IJK"],(function(t){return s("div",{key:t[0],attrs:{title:t,name:t}},[e._l(t.split(""),(function(t){return s("a-row",{key:t,staticClass:"timeblock-row",attrs:{type:"flex",justify:"space-between",align:"stretch"}},[s("a-col",{staticClass:"empty-placeholder",attrs:{span:1}},[s("transition",{attrs:{name:"el-zoom-in-center"}},[s("h1",{directives:[{name:"show",rawName:"v-show",value:e.hoverOn.timeslot===t||null===e.hoverOn.timeslot,expression:"hoverOn.timeslot === b || hoverOn.timeslot === null"}]},[e._v(e._s(t))])]),s("h1",{directives:[{name:"show",rawName:"v-show",value:e.hoverOn.timeslot!==t,expression:"hoverOn.timeslot !== b"}]},[e._v(e._s(" "))])],1),e._l(e.weekdays,(function(o){return s("a-col",{key:o,staticClass:"timeblock",attrs:{span:4},on:{mouseover:function(s){return e.hoverOnGrid(o,t)}}},[s("course-grid-rollback",{attrs:{position:o+t}})],1)}))],2)})),s("a-divider",{attrs:{orientation:"left"}},[e._v(e._s(t))])],2)}))],2)},Yt=[],Xt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"course-grid",staticStyle:{"min-height":"50px"},attrs:{"body-style":{padding:"5px"}}},[e._l(e.coursesInGrid,(function(t){return s("course-tag",{key:t.cname+t.id+e.position,attrs:{course:t,"course-size":e.courseSize,"background-color":e.backgroundColor}})})),e.showCourseInput?s("course-query",{directives:[{name:"show",rawName:"v-show",value:e.isEditable,expression:"isEditable"}],ref:"saveTagInput",staticClass:"hidden-sm-and-down",attrs:{"course-size":e.courseSize,position:e.position,"show-course-input":e.showCourseInput},on:{"update:showCourseInput":function(t){e.showCourseInput=t},"update:show-course-input":function(t){e.showCourseInput=t}}}):s("transition",{attrs:{name:"el-fade-in"}},[s("a-button",{directives:[{name:"show",rawName:"v-show",value:e.isEditable&&e.hoverOn.weekday+e.hoverOn.timeslot===e.position,expression:"isEditable && hoverOn.weekday + hoverOn.timeslot === position"}],staticClass:"hidden-sm-and-down button-new-tag",attrs:{icon:"plus",size:"small","body-style":{padding:"5px"}},on:{click:e.showQueryInput}})],1),s("a-button",{directives:[{name:"show",rawName:"v-show",value:0===e.coursesInGrid.length,expression:"coursesInGrid.length === 0"}],staticClass:"hidden-md-and-up",attrs:{icon:"plus",size:"small"},on:{click:e.promptCourses}}),s("el-dialog",{staticClass:"hidden-md-and-up",attrs:{title:"搜尋課程",visible:e.showPromptCourseInput},on:{"update:visible":function(t){e.showPromptCourseInput=t}}},[e._v("包含"+e._s(e.position)+"的課程"),s("course-query",{attrs:{"course-size":e.courseSize,position:e.position,"show-course-input":e.showCourseInput,"show-prompt-course-input":e.showPromptCourseInput},on:{"update:showCourseInput":function(t){e.showCourseInput=t},"update:show-course-input":function(t){e.showCourseInput=t},"update:showPromptCourseInput":function(t){e.showPromptCourseInput=t},"update:show-prompt-course-input":function(t){e.showPromptCourseInput=t}}}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.showPromptCourseInput=!1}}},[e._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showPromptCourseInput=!1}}},[e._v("新增")])],1)],1)],2)},Zt=[],es={name:"course-grid-rollback",components:{CourseQuery:x,CourseTag:g},props:{position:{}},data:function(){return{showCourseInput:!1,inputValue:"",showPromptCourseInput:!1}},computed:{coursesInGrid:function(){var e=this,t=this.allSelectedCourses.filter((function(t){return t.timeSchedules.includes(e.position)}));return t},courseSize:function(){return this.courseOption.allowCrash?"mini":"large"},isEditable:function(){var e=!this.courseView.addingCourseGrid,t=this.courseView.addingCourseGrid===this.position,s=0===this.coursesInGrid.length;return(e||t)&&(this.courseOption.allowCrash||s)},hoverOn:{get:function(){return this.$store.state.viewState.hoverCourseGrid},set:function(e){this.$store.state.viewState.hoverCourseGrid=e}}},methods:{promptCourses:function(){this.showPromptCourseInput=!0},showQueryInput:function(){var e=this;this.courseView.addingCourseGrid=this.position,this.showCourseInput=!0,this.$nextTick((function(){e.$refs.saveTagInput.$refs.courseQuery.$refs.input.focus()}))},onPromptCourseSelected:function(e){var t=this;this.updateCourse(e),this.$store.state.timetableOptions.previewCourse=null,this.$nextTick((function(){t.showCourseInput=!1,t.inputValue="",t.showPromptCourseInput=!1}))},backgroundColor:function(e){return e?{"必修":"warning","選修":"","通識":"danger"}[e.type]:""}}},ts=es,ss=(s("14d4"),Object(w["a"])(ts,Xt,Zt,!1,null,null,null)),os=ss.exports,ns={name:"CourseTimetableRollback",components:{CourseGridRollback:os},props:["courses"],data:function(){return{weekdays:"12345".split(""),timeblock:"ABCDEFGHIJK".split("")}},methods:{hoverOnGrid:function(e,t){this.hoverOn.weekday=e,this.hoverOn.timeslot=t}},computed:{hoverOn:{get:function(){return this.$store.state.viewState.hoverCourseGrid},set:function(e){this.$store.state.viewState.hoverCourseGrid=e}}}},rs=ns,as=(s("3aa1"),Object(w["a"])(rs,Wt,Yt,!1,null,"001f531a",null)),is=as.exports,us={name:"CourseTutorMain",data:function(){return{activeTab:["courseTable"],showAlert:!1}},components:{CourseTimetableRollback:is,CourseClassifiedList:Qt,TopNavBar:et,Dashboard:R,CourseTimetable:z},methods:{goToPage:function(e){this.activeTab=["courseTable"],this.showAlert=!1,this.$store.state.user.hasPressedLike=!0,this.$store.state.user.hasWatchedRequest=!0,_e(this.$store.state),e?window.open("https://www.facebook.com/NiceCourseToU/"):this.$alert("你有權保持緘默的啦","陽明內鬼抓到惹",{confirmButtonText:"...",cancelButtonText:"我不要"}).then((function(){return window.open("https://www.facebook.com/NiceCourseToU/")})).catch((function(){return window.open("https://www.facebook.com/NiceCourseToU/")}))},selectedTab:function(){console.log(this.activeTab)}},mounted:function(){var e=this;!0!==this.$store.state.user.hasWatchedRequest&&setTimeout((function(){e.showAlert=!0}),25e3)}},cs=us,ls=Object(w["a"])(cs,a,i,!1,null,"e0b7263c",null),ds=ls.exports;function ps(){var e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,s,o){e[s]=o})),e}var fs,hs,ms,vs,ws,bs,gs={name:"App",components:{CourseTutorMain:ds},created:function(){this.$store.commit("loadCourses"),this.$store.commit("loadDiscuss");var e=ps();console.log("Read params:",e),e.importCoursesID&&(this.$notify({title:"已載入課程!",message:"在這個人的課程表上塗鴉囉～",type:"success"}),this.$store.commit("loadSharedCourses",e)),e.code&&(this.$notify({title:"你現在已登入為"+e.username,message:"點右上角的頭像修改科系和年級吧！\n（NCTUOauth未開放給本NCTU查科系的權限，需要手動填寫 (T⌓T)））",type:"success"}),this.$store.commit("signLoginUser",e))}},Cs=gs,ys=(s("034f"),Object(w["a"])(Cs,n,r,!1,null,null,null)),_s=ys.exports,js=s("5c96"),ks=s.n(js),xs=s("ead5"),Os=s.n(xs),Ss=s("2f62");o["default"].use(Os.a),o["default"].use(ks.a),o["default"].use(Ss["a"]);var Is={allCourses:null,courseGroups:null!==(fs=je("courseGroups"))&&void 0!==fs?fs:{default:q()},courseGroupsAvailable:null!==(hs=je("courseGroupsAvailable"))&&void 0!==hs?hs:["default"],usingCourse:null!==(ms=je("usingCourse"))&&void 0!==ms?ms:"default",timetableOptions:null!==(vs=je("timetableOptions"))&&void 0!==vs?vs:{weekday:"12345".split(""),timeslot:"ABCDEFGHIJK".split(""),allowCrash:!0,showOnlySelected:!0,showAttr:{teacher:!1},previewCourse:null,courseDetail:{showDetail:!1,showCourse:null}},user:null!==(ws=je("user"))&&void 0!==ws?ws:{loginInfo:{name:"anonymous",login:!1,code:null,expire:null},displayName:"",dep:"資訊工程學系",grade:"大一",hasPressedLike:!1,hasWatchedRequest:!1},domain:"https://solrz.github.io/nice-course-to-u/",viewState:{addingCourseGrid:null,hoverCourseGrid:{weekday:null,timeslot:null}},coursesDiscuss:{},coursesExtension:null!==(bs=je("coursesExtension"))&&void 0!==bs?bs:{}},$s={loadCourses:function(e){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function s(){var o,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:o=!1;try{n=JSON.parse(localStorage.getItem("allCourses"))}catch(r){console.log(r)}if(!o&&n){s.next=12;break}return t._vm.$notify({title:"從遠端載入所有課程",message:"這可能需要10秒",type:"info"}),s.next=6,Q();case 6:n=s.sent,console.log(n),localStorage.setItem("allCourses",JSON.stringify(n)),t._vm.$notify({title:"成功載入遠端課程",message:"下次可以直接使用了",type:"success"}),s.next=13;break;case 12:console.log("Loaded courses from local");case 13:e.allCourses=n;case 14:case"end":return s.stop()}}),s)})))()},updateCourse:function(e,t){console.log("Adding course"),e.timetableOptions.previewCourse=null,e.courseGroups[e.usingCourse]=Y(e.courseGroups[e.usingCourse],t),_e(e)},loadSharedCourses:function(e,t){return Object(V["a"])(regeneratorRuntime.mark((function s(){var o,n,r,a,i,u,c,d,p,f,h;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:r=null!==(o=t.importCoursesID)&&void 0!==o?o:"",a=r.replace(" ","").split(","),console.log(e.allCourses);try{i=JSON.parse(localStorage.getItem("allCourses"))}catch(m){console.log(m)}if(i){s.next=8;break}return s.next=7,Q();case 7:i=s.sent;case 8:u=null!==(n=t.importCourseGroupName)&&void 0!==n?n:"default",e.allCourses=i,e.usingCourse=u,e.courseGroups[u]||(e.courseGroupsAvailable.push(u),e.courseGroups[u]=q()),c=Object(l["a"])(a),s.prev=13,c.s();case 15:if((d=c.n()).done){s.next=29;break}if(p=d.value,!p){s.next=27;break}if(0===p.length){s.next=27;break}if(console.log(p),me("Importing course: ".concat(p)),f=e.courseGroups[u].list,h=e.allCourses[p],h){s.next=26;break}return me("Invalid course: ".concat(p)),s.abrupt("continue",27);case 26:f.includes(h)?me("Course already exist course: ".concat(p)):(e.courseGroups[u]=Y(e.courseGroups[u],i[p]),me("Import done course: ".concat(p)));case 27:s.next=15;break;case 29:s.next=34;break;case 31:s.prev=31,s.t0=s["catch"](13),c.e(s.t0);case 34:return s.prev=34,c.f(),s.finish(34);case 37:_e(e);case 38:case"end":return s.stop()}}),s,null,[[13,31,34,37]])})))()},switchCourseGroup:function(e,t){e.usingCourse=t,e.courseGroupsAvailable.includes(t)||e.courseGroupsAvailable.push(t),e.courseGroups[t]||(e.courseGroups[t]=q()),console.log("New Course Group Generated:",t),_e(e)},loadDiscuss:function(e){return Object(V["a"])(regeneratorRuntime.mark((function t(){var s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s="https://script.google.com/macros/s/AKfycbyx59Df4z6K7AlCDwPLjRbKaeJUaVkx53Td-ERiQ3KLS4_IrzVO/exec",t.next=3,be.a.get(s);case 3:return o=t.sent,console.log(o.data),e.coursesDiscuss=o.data,_e(e),t.abrupt("return",o.data);case 8:case"end":return t.stop()}}),t)})))()},signLoginUser:function(e,t){e.user.loginInfo.login=!0,e.user.loginInfo.name=t.username,e.user.loginInfo.code=t.code,e.user.loginInfo.expire=t.expire,_e(e)},loadCourseExtension:function(e,t){e.coursesExtension=ve(e.coursesExtension,t),_e(e)}},Ts=new Ss["a"].Store({state:Is,mutations:$s}),Ns={computed:{allCoursesList:function(){var e,t;return null!==(e=Object.values(null!==(t=this.$store.state.allCourses)&&void 0!==t?t:{}))&&void 0!==e?e:[]},allCourses:function(){var e;return null!==(e=this.$store.state.allCourses)&&void 0!==e?e:{}},allSelectedCourses:function(){var e;return null!==(e=Object.values(this.coursesGroup.list))&&void 0!==e?e:[]},coursesGroup:function(){return this.$store.state.courseGroups[this.$store.state.usingCourse]},courseOption:function(){return this.$store.state.timetableOptions},courseView:function(){return this.$store.state.viewState},user:function(){return this.$store.state.user},requestsProxy:function(){return"https://cors-anywhere.herokuapp.com/"}},methods:{updateCourse:function(e){this.$store.commit("updateCourse",e)},coursesAdded:function(e){return this.allSelectedCourses.includes(e)},showCourseDetail:function(e){console.log("Clicked course:",e.cname),this.courseOption.courseDetail.showDetail=!0,this.courseOption.courseDetail.showCourse=e}}},Gs=s("f825"),zs=s.n(Gs),Es=(s("202f"),s("0fae"),s("f23d"));o["default"].use(ft["b"]),o["default"].use(Es["a"]),o["default"].use(zs.a),o["default"].config.productionTip=!1,o["default"].prototype.$bus=new o["default"],o["default"].mixin(Ns),new o["default"]({render:function(e){return e(_s)},store:Ts}).$mount("#app")},5883:function(e,t,s){},"5ab0":function(e,t,s){"use strict";var o=s("6bdc"),n=s.n(o);n.a},6154:function(e,t,s){"use strict";var o=s("e597"),n=s.n(o);n.a},"643f":function(e,t,s){},"695c":function(e,t,s){"use strict";var o=s("d165"),n=s.n(o);n.a},"6bdc":function(e,t,s){},7064:function(e,t,s){},"7e0e":function(e,t,s){},"85ec":function(e,t,s){},"86b2":function(e,t,s){"use strict";var o=s("7064"),n=s.n(o);n.a},"908f":function(e,t,s){},"97b6":function(e,t,s){"use strict";var o=s("a936"),n=s.n(o);n.a},a936:function(e,t,s){},a98c:function(e,t,s){},c5c1:function(e,t,s){"use strict";var o=s("643f"),n=s.n(o);n.a},c970:function(e,t,s){"use strict";var o=s("2dc4"),n=s.n(o);n.a},d165:function(e,t,s){},d5b3:function(e,t,s){},d5fb:function(e,t,s){"use strict";var o=s("d5b3"),n=s.n(o);n.a},e597:function(e,t,s){},e6ea:function(e,t,s){}});
//# sourceMappingURL=app.afe8d4b5.js.map